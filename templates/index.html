{% extends "layout.html" %}

{% block title %}
    Project Tracker
{% endblock %}

{% block main %}
{% for project in projects %}
<div>

    <div class="row d-flex justify-content-center container">
    <div class="col-md-8">
        <div class="card-hover-shadow-2x mb-3 card">
            <div class="card-header-tab card-header">
                <div class="card-header-title font-size-lg text-capitalize font-weight-normal"><i class="fa fa-tasks"></i>&nbsp;{{project['project']}} - Task List</div>
            </div>
            <div class="scroll-area-sm">
                <perfect-scrollbar class="ps-show-limits">
                    <div style="position: static;" class="ps ps--active-y">
                        <div class="ps-content">
                            <ul class=" list-group list-group-flush">
                                  {% for t,f in project['tandf'] %}

                                <li class="list-group-item">
                                    <div class="todo-indicator bg-warning"></div>
                                    <div class="widget-content p-0">
                                        <div class="widget-content-wrapper">
                                            <div class="widget-content-left">
                                                <div class="widget-heading">{{t}}<div class="badge badge-danger ml-2">{{f}}</div>
                                                </div>
                                                <div class="widget-subheading"><i></i></div>
                                            </div>
                                            <div class="widget-content-right">
                                                 <form action="/" method ="post">
                                                 <div class="widget-content-right">
                                                    <input type="hidden" class="form-group" name="pj_id" value={{project['pj_id']}}></input>
                                                    <input type="hidden" class="form-group" name="t" value={{t}}></input>
                                                    <input type="hidden" class="form-group" name="f" value={{f}}></input>
                                                    <button type= "submit" class="form-group border-0 btn-transition btn btn-outline-success" name="clicked" value="check">
                                                        <i class="fa fa-check"></i>
                                                    </button>
                                                    <button type="submit" class="form-group border-0 btn-transition btn btn-outline-danger" name="clicked" value="remove">
                                                        <i class="fa fa-trash"></i>
                                                    </button>
                                            </div>

                                            </form> </div>
                                        </div>
                                    </div>
                                </li>
                                 {% endfor %}
                            </ul>
                        </div>
                    </div>
                </perfect-scrollbar>
            </div>
            {% if project['progress'] == 0 %}
                 <div class="progress">
          <div class="progress-bar progress-bar-striped" role="progressbar" style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
            {% elif project['progress'] <= 20 %}
            <div class="progress">
          <div class="progress-bar progress-bar-striped" role="progressbar" style="width: 20%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
            {% elif project['progress'] <= 40 %}
            <div class="progress">
          <div class="progress-bar progress-bar-striped" role="progressbar" style="width: 40%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
            {% elif project['progress'] <= 50 %}
            <div class="progress">
          <div class="progress-bar progress-bar-striped" role="progressbar" style="width: 50%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
            {% elif project['progress'] <= 60 %}
            <div class="progress">
          <div class="progress-bar progress-bar-striped" role="progressbar" style="width: 60%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
    </div>

            {% elif project['progress'] <= 80 %}
            <div class="progress">
          <div class="progress-bar progress-bar-striped" role="progressbar" style="width: 80%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
    </div>

            {% elif project['progress'] <= 99 %}
            <div class="progress">
          <div class="progress-bar progress-bar-striped" role="progressbar" style="width: 90%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
     {% elif project['progress'] == 100 %}
            <div class="progress">
          <div class="progress-bar progress-bar-striped" role="progressbar" style="width: 100%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
    </div>

    {% endif %}

            <div class="d-block text-right card-footer">

            {%for emp in project['employee'] %}
                 <span class="tm-tag tm-tag-info" id="obdaG_1"><span>{{emp}}</span></span>
            {% endfor %}
                <button class="btn btn-primary" data-toggle="collapse" data-target="#collapseBox" aria-expanded="false" aria-controls="collapseBox">Add Task</button></div>
            <div class="collapse" id="collapseBox">
                <div class="card card-body">
                    <form action="/" method = "post">
                        <input type="hidden" class="form-group" name="project_id" value={{project['pj_id']}}></input>
                        <input class="form-group container" Placeholder="Task Name" name="task"></input>
                        <button class="form-group btn btn-secondary" name="clicked" value = "add">Add</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    </div>
</div>

{% endfor %}



{% endblock %}